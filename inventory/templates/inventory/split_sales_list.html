{% extends "base.html" %}

{% block title %}NOA Beauty — Все распивы{% endblock %}
{% block page_header %}
    <h2 class="h4 mb-1">Распивы</h2>
    <p class="text-muted mb-0">Детализированный учёт всех распивов с фильтрацией</p>
{% endblock %}

{% block content %}
    <form method="get" class="row mb-3 g-3">
        {% for field in filter.form %}
            <div class="col-md-3">
                <label class="form-label">{{ field.label }}</label>
                {{ field }}
            </div>
        {% endfor %}
        <div class="col-12">
            <button class="btn btn-primary">Фильтр</button>
            <a href="{% url 'split-sales' %}" class="btn btn-outline-secondary">Сбросить</a>
        </div>
    </form>

<div class="table-responsive">
    <table class="table table-bordered table-striped align-middle mb-0">
        <thead>
            <tr>
                <th>#</th>
                <th>Дата (чек)</th>
                <th>Парфюм</th>
                <th>Объём (мл)</th>
                <th>Тип тары</th>
                <th>Кол-во тары</th>
                <th>Стоимость</th>
            </tr>
        </thead>
        <tbody>
        {% for item in object_list %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ item.sale.sale_date|date:"d.m.Y H:i" }}</td>
                <td>{{ item.perfume }}</td>
                <td>{{ item.ml }}</td>
                <td>{% if item.bottle_type %}{{ item.bottle_type }}{% endif %}</td>
                <td>{{ item.bottle_count }}</td>
                <td>{{ item.line_total }}</td>
            </tr>
        {% empty %}
            <tr>
                <td colspan="7" class="text-center text-muted py-3">Нет данных по распивам</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}

